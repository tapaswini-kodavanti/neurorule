
# Copyright (C) 2019-2021 Cognizant Digital Business, Evolutionary AI.
# All Rights Reserved.
# Issued under the Academic Public License.
#
# You can be released from the terms, and requirements of the Academic Public
# License by purchasing a commercial license.
# Purchase of a commercial license is mandatory for any use of the
# ENN-release SDK Software in commercial settings.
#
# END COPYRIGHT

# This pipeline will create an image with the required
# tools for administation of the evolution service within 
# Kubernetes.

version: '1.0'
steps:
    
    clone-evolution-service:
        title: "Clone evolution-service repo"
        type: "git-clone"
        repo: "leaf-ai/evolution-service"
        revision: ${{CF_REVISION}}

    build:
        title: "Building Docker image"
        type: "build"
        image_name: "leaf/evolution-service-kube-admin"
        working_directory: "${{CF_VOLUME_PATH}}/evolution-service"
        tag: ${{CF_BRANCH}}-${{CF_SHORT_REVISION}}
        dockerfile: "kube_admin_Dockerfile"
        buildkit: true

